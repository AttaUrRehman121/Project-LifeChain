{% load static %}

<link rel="stylesheet" href="{% static 'signinStlye.css' %}" />
<style>
  body {
    background-color: #267dff;
  }
</style>

<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<div class="background">
  <div class="shape"></div>
  <div class="shape"></div>
</div>

<form action="{% url 'signup' %}" method="post">
  {% csrf_token %}
  <h3 class="signiin">Signup Here</h3>

  <label for="username">Username</label>
  <input type="text" name="username" id="username" placeholder="Enter FullName"
    required>

  <label for="email">Email</label>
  <input type="email" name="email" id="email" placeholder="Enter Email"
    required>

  <label for="nationality">Nationality</label>
  <input type="text" name="nationality" id="nationality"
    placeholder="e.g., Pakistan" required>

  <label for="role">Select Role</label>
  <select name="role" id="role" required>
    <option value>....</option>
    <option value="donor">Donor</option>
    <option value="recipient">Recipient</option>
  </select>

  <label for="contact">Contact</label>
  <input type="text" name="contact" id="contact" placeholder="03** -***-***"
    required>

  <label for="address">Address</label>
  <input type="text" name="address" id="address" placeholder="Enter Address"
    required>

  <label for="password">Password</label>
  <input type="password" name="password" id="password" placeholder="Password"
    required minlength="8">

  <label for="password2">Confirm Password</label>
  <input type="password" name="password2" id="password2"
    placeholder="Confirm Password" required minlength="8">

  <button id="signup-btn" type="submit">Signup</button>
  <a class="ancher" href="{% url 'login' %}">I already have an account</a>
</form>

{% if messages %}
<script>
    {% for message in messages %}
      Swal.fire({
        title: '{{ message.tags|capfirst }}',
        text: '{{ message }}',
        icon: '{{ message.tags }}',
        timer: 2000,
        showConfirmButton: false
      });
    {% endfor %}
  </script>
{% endif %}

<script>
  const signupButton = document.getElementById('signup-btn');
  const password = document.getElementById('password');
  const password2 = document.getElementById('password2');

  function isPasswordStrong(pwd) {
    return (
      pwd.length >= 8 &&
      /[A-Z]/.test(pwd) &&
      /[0-9]/.test(pwd) &&
      /[!@#$%^&*(),.?":{}|<>]/.test(pwd)
    );
  }

  signupButton.addEventListener('click', (e) => {
    if (password.value !== password2.value) {
      e.preventDefault();
      alert('Passwords do not match');
      return;
    }

    if (!isPasswordStrong(password.value)) {
      e.preventDefault();
      alert('Password must be at least 8 characters long, include a number, an uppercase letter, and a special character.');
    }
  });
</script>
